<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DownAPK - iOS 26 Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-black: #000000;
            --card-gray: #1c1c1e;
            --text-white: #ffffff;
            --text-gray: #8e8e93;
            --accent-blue: #007aff;
            --glass: rgba(28, 28, 30, 0.8);
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif; 
            margin: 0; 
            background: var(--bg-black); 
            color: var(--text-white); 
            padding-bottom: 120px; 
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        /* HEADER */
        header {
            padding: 60px 20px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 34px;
            font-weight: 700;
            margin: 0;
            letter-spacing: -1px;
        }

        .user-profile {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff8400, #ffb347);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* IMMERSIVE FEATURED BANNER (iOS 26 Style) */
        #featured-section {
            padding: 10px 0;
        }

        .featured-card {
            position: relative;
            margin: 0 20px;
            height: 450px;
            border-radius: 30px;
            overflow: hidden;
            background: #111;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
        }

        .featured-card:active { transform: scale(0.97); }

        .featured-img-full {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }

        .featured-content {
            position: relative;
            padding: 30px;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            text-align: center;
        }

        .featured-tag {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            display: block;
        }

        .featured-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .featured-subtitle {
            font-size: 15px;
            color: var(--text-gray);
            margin-bottom: 20px;
        }

        .play-btn {
            background: var(--text-white);
            color: black;
            padding: 12px 40px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 16px;
            border: none;
            cursor: pointer;
            display: inline-block;
        }

        /* SECTION TITLES */
        .section-header {
            padding: 30px 20px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header h2 {
            font-size: 22px;
            font-weight: 700;
            margin: 0;
        }

        .section-header i { color: var(--text-gray); font-size: 18px; }

        /* HORIZONTAL LISTS */
        .h-scroll {
            display: flex;
            overflow-x: auto;
            padding: 0 20px;
            gap: 15px;
            scrollbar-width: none;
        }
        .h-scroll::-webkit-scrollbar { display: none; }

        .game-card {
            min-width: 110px;
            display: flex;
            flex-direction: column;
        }

        .game-icon {
            width: 110px;
            height: 110px;
            border-radius: 24px;
            background: var(--card-gray);
            object-fit: cover;
            margin-bottom: 8px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .game-title {
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* VERTICAL APP LIST (Fixed Bug) */
        .app-list {
            padding: 0 20px;
        }

        .app-item {
            display: flex;
            align-items: center;
            background: var(--card-gray);
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 20px;
            text-decoration: none;
            color: white;
        }

        .app-icon-small {
            width: 60px;
            height: 60px;
            border-radius: 14px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .app-details {
            flex-grow: 1;
            min-width: 0; /* Verhindert Text-Overflow Bug */
        }

        .app-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .app-sub {
            font-size: 12px;
            color: var(--text-gray);
        }

        .laden-btn {
            background: rgba(255,255,255,0.1);
            color: var(--accent-blue);
            padding: 6px 18px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 14px;
            text-transform: uppercase;
            margin-left: 10px;
            flex-shrink: 0;
        }

        /* FLOATING NAV BAR (iOS 26 Style) */
        .floating-nav {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            height: 70px;
            border-radius: 40px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            z-index: 1000;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-gray);
            text-decoration: none;
            font-size: 10px;
            font-weight: 500;
            gap: 4px;
            transition: 0.2s;
        }

        .nav-link.active { color: var(--text-white); }
        .nav-link i { font-size: 20px; }

        .nav-search-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        /* SEARCH OVERLAY */
        #search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-black);
            z-index: 2000;
            display: none;
            padding: 60px 20px;
            box-sizing: border-box;
        }

        .search-input-box {
            background: var(--card-gray);
            border-radius: 15px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input-box input {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            width: 100%;
            outline: none;
        }

        .close-search {
            margin-top: 20px;
            color: var(--accent-blue);
            font-weight: 600;
            cursor: pointer;
        }

        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    </style>
</head>
<body>

<header>
    <h1>DownAPK</h1>
    <div class="user-profile">
        <i class="fas fa-user" style="color: white; font-size: 16px;"></i>
    </div>
</header>

<div id="main-content">
    
    <div id="featured-section"></div>

    <div class="section-header">
        <h2>Weiter spielen</h2>
        <i class="fas fa-chevron-right"></i>
    </div>
    <div class="h-scroll" id="continue-playing">
        </div>

    <div class="section-header">
        <h2>Neue Spiele, die wir lieben</h2>
        <i class="fas fa-chevron-right"></i>
    </div>
    <div class="h-scroll" id="new-games-list"></div>

    <div class="section-header">
        <h2>Zuletzt aktualisiert</h2>
    </div>
    <div id="feed-list" class="app-list"></div>
    
    <div style="text-align:center; padding: 20px;">
        <div onclick="loadMore()" style="color: var(--accent-blue); font-weight: 600; cursor: pointer;">Mehr anzeigen</div>
    </div>
</div>

<div id="search-results-container" class="hidden">
    <div class="section-header">
        <h2 id="search-term-display">Suche</h2>
        <span onclick="closeViewAll()" style="color: var(--accent-blue);">Fertig</span>
    </div>
    <div id="search-list" class="app-list"></div>
</div>

<div id="search-overlay">
    <div class="search-input-box">
        <i class="fas fa-search" style="color: var(--text-gray);"></i>
        <input type="text" id="search-input" placeholder="Apps und Spiele suchen">
    </div>
    <div class="close-search" onclick="toggleSearch(false)">Abbrechen</div>
    <div id="search-suggestions" style="margin-top: 30px;" class="app-list"></div>
</div>

<nav class="floating-nav">
    <a href="#" class="nav-link active" onclick="closeViewAll()">
        <i class="fas fa-home"></i>
        <span>Home</span>
    </a>
    <a href="#" class="nav-link">
        <i class="fas fa-gamepad"></i>
        <span>Arcade</span>
    </a>
    <a href="#" class="nav-link">
        <i class="fas fa-users"></i>
        <span>Play</span>
    </a>
    <a href="#" class="nav-link">
        <i class="fas fa-box"></i>
        <span>Library</span>
    </a>
    <div class="nav-search-btn" onclick="toggleSearch(true)">
        <i class="fas fa-search"></i>
    </div>
</nav>

<script>
    let allApps = [];
    let featuredInterval;
    let feedAppsShown = 0;
    const BATCH_SIZE = 8;

    // --- UI Logic ---
    function toggleSearch(show) {
        const overlay = document.getElementById('search-overlay');
        overlay.style.display = show ? 'block' : 'none';
        if(show) document.getElementById('search-input').focus();
    }

    function closeViewAll() {
        document.getElementById('main-content').classList.remove('hidden');
        document.getElementById('search-results-container').classList.add('hidden');
    }

    // --- Data Rendering ---
    function createFeaturedCard(app) {
        // Generiere ein zufälliges Hintergrundbild (hier Platzhalter mit Verlauf)
        const hue = Math.floor(Math.random() * 360);
        return `
            <div class="featured-card fade-in">
                <div class="featured-img-full" style="background: linear-gradient(to bottom, hsl(${hue}, 50%, 30%), #000);"></div>
                <div class="featured-content">
                    <span class="featured-tag">Special Event</span>
                    <div class="featured-title">${app.name}</div>
                    <div class="featured-subtitle">Die neueste Version von ${app.author} ist da.</div>
                    <button class="play-btn" onclick="location.href='app.html?id=${app.packageName}'">Installieren</button>
                </div>
            </div>
        `;
    }

    function createGameIcon(app) {
        return `
            <a href="app.html?id=${app.packageName}" class="game-card">
                <img src="${app.icon}" class="game-icon" onerror="this.src='https://via.placeholder.com/110/333/fff?text=App'">
                <div class="game-title">${app.name}</div>
            </a>
        `;
    }

    function createAppItem(app) {
        return `
            <a href="app.html?id=${app.packageName}" class="app-item">
                <img src="${app.icon}" class="app-icon-small" onerror="this.src='https://via.placeholder.com/60/333/fff?text=App'">
                <div class="app-details">
                    <div class="app-name">${app.name}</div>
                    <div class="app-sub">${app.author} • v${app.version}</div>
                </div>
                <div class="laden-btn">Laden</div>
            </a>
        `;
    }

    // --- Core Functions ---
    async function init() {
        const dummyData = [
            { name: "Marvel Snap", author: "Second Dinner", version: "1.2", icon: "https://via.placeholder.com/150/800080/fff?text=MS", packageName: "ms" },
            { name: "WhatsApp", author: "Meta", version: "2.24", icon: "https://via.placeholder.com/150/25D366/fff?text=WA", packageName: "wa" },
            { name: "Minecraft", author: "Mojang", version: "1.21", icon: "https://via.placeholder.com/150/4CAF50/fff?text=MC", packageName: "mc" },
            { name: "Spotify", author: "Spotify AB", version: "8.9", icon: "https://via.placeholder.com/150/1DB954/fff?text=SP", packageName: "sp" },
            { name: "Telegram", author: "Telegram FZ", version: "10.1", icon: "https://via.placeholder.com/150/0088cc/fff?text=TG", packageName: "tg" },
            { name: "Vanced Manager", author: "Team Vanced", version: "2.6", icon: "https://via.placeholder.com/150/f00/fff?text=VM", packageName: "vm" }
        ];

        allApps = dummyData; // In Realität: fetch('/api/apps')

        // 1. Featured Rotation
        let featIdx = 0;
        const renderFeat = () => {
            document.getElementById('featured-section').innerHTML = createFeaturedCard(allApps[featIdx]);
            featIdx = (featIdx + 1) % allApps.length;
        };
        renderFeat();
        setInterval(renderFeat, 6000);

        // 2. Continue Playing & New Games
        const contList = document.getElementById('continue-playing');
        const newList = document.getElementById('new-games-list');
        allApps.forEach(app => {
            contList.innerHTML += createGameIcon(app);
            newList.innerHTML += createGameIcon(app);
        });

        // 3. Main Feed
        loadMore();
    }

    window.loadMore = function() {
        const container = document.getElementById('feed-list');
        const nextBatch = allApps.slice(feedAppsShown, feedAppsShown + BATCH_SIZE);
        nextBatch.forEach(app => container.innerHTML += createAppItem(app));
        feedAppsShown += nextBatch.length;
    };

    // Search Logic
    document.getElementById('search-input').addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const suggestions = document.getElementById('search-suggestions');
        suggestions.innerHTML = '';
        
        if(query.length > 1) {
            const filtered = allApps.filter(a => a.name.toLowerCase().includes(query));
            filtered.forEach(app => suggestions.innerHTML += createAppItem(app));
        }
    });

    init();
</script>

</body>
</html>
